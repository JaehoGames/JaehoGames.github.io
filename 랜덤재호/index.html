<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>랜덤재호</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <audio id="bgMusic" src="bgm.mp3" loop></audio>
    <audio id="coinClickSound" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABgAZGF0YQAAAAA="></audio>
    
    <div class="screen-flash" id="screenFlash"></div>

    <div class="game-container" id="gameContainer">
        <h1>🎁 랜덤재호</h1>
        
        <!-- 재호코인 표시 영역 -->
        <div class="coins-display" id="coinsDisplay">
            <div class="coin-icon">
                <img src="jaeho.jpg" alt="재호코인 아이콘">
            </div>
            <div class="coin-amount" id="coinAmount">0</div>
            <div class="coin-label">재호코인</div>
        </div>
        
        <div class="gacha-container">
            <div class="gacha-box" id="gachaBox" onclick="pullGacha()">📦</div>
            <p style="font-size: 1.2em; opacity: 0.8;">상자를 클릭하여 뽑기!</p>
            
            <div class="result-container" id="resultContainer">
                <img id="resultImage" class="result-image" src="" alt="결과 이미지">
                <div id="resultText" class="result-text"></div>
                <div id="resultGrade" class="result-grade"></div>
            </div>
        </div>

        <div style="text-align: center; margin-bottom: 20px;">
            <button class="pull-button" id="pullButton" onclick="pullGacha()">🎲 가챠 뽑기</button>
            <button class="reset-button" onclick="resetGame()">🔄 초기화</button>
            <button class="reset-button" onclick="copyShareURL()" style="background: linear-gradient(45deg, #3498db, #2980b9);">📋 저장 링크 복사</button>
        </div>

        <div class="probability-info">
            <h3>📊 등급별 확률 & 재호코인</h3>
            <div class="grade-info ultimate-jaeho">
                <div style="display: flex; align-items: center;">
                    <div class="grade-color ultimate-jaeho"></div>
                    <span>얼티밋 재호 (Ultimate Jaeho)</span>
                </div>
                <span>0.01% | 10,000코인</span>
            </div>
            <div class="grade-info divine">
                <div style="display: flex; align-items: center;">
                    <div class="grade-color divine"></div>
                    <span>신성 (Divine)</span>
                </div>
                <span>0.1% | 5,000코인</span>
            </div>
            <div class="grade-info mythic">
                <div style="display: flex; align-items: center;">
                    <div class="grade-color mythic"></div>
                    <span>신화 (Mythic)</span>
                </div>
                <span>1% | 1,000코인</span>
            </div>
            <div class="grade-info legendary">
                <div style="display: flex; align-items: center;">
                    <div class="grade-color legendary"></div>
                    <span>레전드리 (Legendary)</span>
                </div>
                <span>3% | 500코인</span>
            </div>
            <div class="grade-info">
                <div style="display: flex; align-items: center;">
                    <div class="grade-color epic"></div>
                    <span>에픽 (Epic)</span>
                </div>
                <span>7% | 100코인</span>
            </div>
            <div class="grade-info">
                <div style="display: flex; align-items: center;">
                    <div class="grade-color rare"></div>
                    <span>레어 (Rare)</span>
                </div>
                <span>12% | 50코인</span>
            </div>
            <div class="grade-info">
                <div style="display: flex; align-items: center;">
                    <div class="grade-color uncommon"></div>
                    <span>언커먼 (Uncommon)</span>
                </div>
                <span>35% | 20코인</span>
            </div>
            <div class="grade-info">
                <div style="display: flex; align-items: center;">
                    <div class="grade-color common"></div>
                    <span>커먼 (Common)</span>
                </div>
                <span>43.89% | 10코인</span>
            </div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalSpins">0</div>
                <div>총 뽑기</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="ultimateJaehoCount">0</div>
                <div>얼티밋 재호</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="divineCount">0</div>
                <div>신성</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="mythicCount">0</div>
                <div>신화</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="legendaryCount">0</div>
                <div>레전드리</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="epicCount">0</div>
                <div>에픽</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="rareCount">0</div>
                <div>레어</div>
            </div>
        </div>
    </div>

    <div class="fireworks" id="fireworks"></div>

    <script src="gameData.js"></script>
    <script src="gacha.js"></script>
    <script src="effects.js"></script>
    <script src="utils.js"></script>
    <script src="quiz.js"></script>
    <script src="main.js"></script>
    <!-- 상점 버튼 (기존 버튼들 근처에 추가) -->
<button class="shop-button" onclick="toggleShop()">🏪 상점</button>

<!-- 상점 모달 (body 끝 부분 근처에 추가) -->
<div class="shop-modal" id="shopModal">
    <div class="shop-content">
        <div class="shop-header">
            <h2>🏪 재호 상점</h2>
            <button class="close-shop" onclick="toggleShop()">✕</button>
        </div>
        
        <!-- 현재 활성 효과 표시 -->
        <div class="active-effects" id="activeEffects">
            <h3>🎯 활성 효과</h3>
            <div class="effects-list" id="effectsList">
                <p class="no-effects">활성 효과가 없습니다</p>
            </div>
        </div>
        
        <!-- 상점 아이템들 -->
        <div class="shop-items">
            <div class="shop-item" data-item="luckPotion">
                <div class="item-icon">🍀</div>
                <div class="item-info">
                    <h4>행운 포션</h4>
                    <p>다음 10회 뽑기 동안 레어 이상 확률 2배</p>
                    <div class="item-price">💰 500 코인</div>
                </div>
                <button class="buy-button" onclick="buyItem('luckPotion')">구매</button>
            </div>
            
            <div class="shop-item" data-item="speedPotion">
                <div class="item-icon">⚡</div>
                <div class="item-info">
                    <h4>신속 포션</h4>
                    <p>다음 5회 뽑기 애니메이션 시간 절반</p>
                    <div class="item-price">💰 200 코인</div>
                </div>
                <button class="buy-button" onclick="buyItem('speedPotion')">구매</button>
            </div>
            
            <div class="shop-item" data-item="mysteryBox">
                <div class="item-icon">📦</div>
                <div class="item-info">
                    <h4>미스터리 박스</h4>
                    <p>랜덤한 보너스 효과 (1-3회)</p>
                    <div class="item-price">💰 300 코인</div>
                </div>
                <button class="buy-button" onclick="buyItem('mysteryBox')">구매</button>
            </div>
            
            <div class="shop-item" data-item="doubleCoins">
                <div class="item-icon">💰</div>
                <div class="item-info">
                    <h4>코인 부스터</h4>
                    <p>다음 5회 뽑기에서 얻는 코인 2배</p>
                    <div class="item-price">💰 400 코인</div>
                </div>
                <button class="buy-button" onclick="buyItem('doubleCoins')">구매</button>
            </div>
            
            <div class="shop-item" data-item="guaranteedRare">
                <div class="item-icon">🎫</div>
                <div class="item-info">
                    <h4>레어 보장권</h4>
                    <p>다음 뽑기에서 레어 이상 보장</p>
                    <div class="item-price">💰 800 코인</div>
                </div>
                <button class="buy-button" onclick="buyItem('guaranteedRare')">구매</button>
            </div>
            
            <div class="shop-item" data-item="ultimateChance">
                <div class="item-icon">🌟</div>
                <div class="item-info">
                    <h4>얼티밋 찬스</h4>
                    <p>다음 뽑기에서 얼티밋 재호 확률 10배</p>
                    <div class="item-price">💰 2,000 코인</div>
                </div>
                <button class="buy-button" onclick="buyItem('ultimateChance')">구매</button>
            </div>
        </div>
    </div>
</div>

<!-- 봇 방지 퀴즈 모달 -->
<div class="quiz-modal" id="quizModal">
    <div class="quiz-content">
        <h2>🤖 봇 방지 퀴즈</h2>
        <p>자동 프로그램 사용을 방지하기 위해 간단한 퀴즈를 풀어주세요.<br>30초 내에 풀지 못하거나 틀릴 경우, 보유 코인의 25%가 차감됩니다.</p>
        <div class="quiz-problem" id="quizProblem"></div>
        <div class="quiz-answers" id="quizAnswers">
            <!-- 답변 버튼들이 동적으로 생성될 위치 -->
        </div>
        <button class="quiz-submit-button" id="quizSubmitButton" disabled>답변 제출</button>
    </div>
</div>

</body>
</html>